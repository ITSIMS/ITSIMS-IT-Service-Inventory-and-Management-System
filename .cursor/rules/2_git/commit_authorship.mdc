---
description: Инструкции для ИИ агента по созданию коммитов в проекте ITSIMS
globs: []
alwaysApply: true
---

# Инструкции по созданию коммитов

> **Связанные документы:**
> - `commit_format.mdc` — правила оформления сообщений коммитов
> - `branching_strategy.mdc` — стратегия работы с ветками

## Важная информация о проекте

Этот проект выполняется **одним человеком** (retrobanner), но для отчетности перед университетом коммиты должны быть **от имени разных участников команды**.

## Команда проекта

| Ключ         | Имя                  | Email                    |
| ------------ | -------------------- | ------------------------ |
| `baranov`    | Александр Баранов    | retrobanner@icloud.com   |
| `zatsepilin` | Антон Зацепилин      | zatsepilin999@gmail.com  |
| `koganovsky` | Григорий Когановский | g.koganovsky@gmail.com   |
| `nosov`      | Алексей Носов        | alex2004nosovu@gmail.com |
| `valkovets`  | Данила Вальковец     | dahnh33@gmail.com        |
| `lovkov`     | Кирилл Ловков        | lovkovk2@gmail.com       |
| `grechko`    | Илья Гречко          | igrechko4w@gmail.com     |

## Процесс создания коммитов

### 1. Определение автора коммита

Автора коммита можно определить по изменениям коммита. Руководствуюясь ролями и распределением обязанностей
в файле @README.md можно понять, кто будет делать коммит.

Также, как правило, можно понять, кто будет делать коммит из контекста диалога со мной, а также из названия выполняемой задачи.

Важно! Все задачи создает Баранов. Но выполняют их те, кто указан в названии.

Если возникают сомнения по поводу авторства, то поступай следующим образом:
1. Напиши в диалог со мной вопрос: "От чьего имени вы бы хотели создать этот коммит?"
2. Если все еще возникают сомнения, то коммит нужно делать от имени Баранова (основного контрибьютера).

### 2. Формат сообщения коммита

Следуй правилам из `commit_format.mdc`:
```
<тип>(<область>): <краткое описание>
```

**Примеры:**
- `feat(tasks): добавить задачу для Носова`
- `fix(spec): исправить опечатку в ТЗ`
- `chore(tasks): переместить задачу Гречко в выполненные`

### 3. Команда для создания коммита

**ВАЖНО:** Всегда используй скрипт `tools/commit_as.sh`:

```bash
./tools/commit_as.sh <автор> "<сообщение коммита>"
```

**НЕ используй:**
- ❌ `git commit -m "..."`
- ❌ `git commit --author="..."`
- ❌ Переменные окружения напрямую

**Используй только:**
- ✅ `./tools/commit_as.sh <автор> "<сообщение>"`

### 4. Примеры рабочего процесса

#### Пример 1: Создание задачи для Носова
```bash
# 1. Файлы уже подготовлены и добавлены в git
git add task-tracker/1_sprint/2025-11-28_Носов.md

# 2. Коммит от имени Баранова, который поставил задачу Носову
./tools/commit_as.sh baranov "feat(tasks): добавить задачу для Носова"
```

#### Пример 2: Обновление ТЗ (общая работа)
```bash
# 1. Добавить изменения
git add artifacts/1_technical.md

# 2. Коммит от имени Вальковца (он отвечает за наполнение артефактов)
./tools/commit_as.sh valkovets "feat(spec): дополнить раздел требований к API"
```

#### Пример 3: Исправление задачи Когановского
```bash
# 1. Добавить изменения
git add task-tracker/1_sprint/2025-11-22_Когановский.md

# 2. Коммит от имени Баранов
./tools/commit_as.sh baranov "fix(tasks): исправить формат отчёта в задаче Когановского"
```

## Правила для ИИ агента

1. **Автоматически определяй автора** по контексту работы (по именам файлов задач)
2. **Всегда используй `tools/commit_as.sh`** для создания коммитов
3. **Следуй формату сообщений** из `commit_format.mdc`
4. **Не упоминай скрипт** в сообщениях коммитов (это внутренний инструмент)
5. **После коммита не нужно объяснять**, что это от другого автора — это нормальный процесс
6. **В случае сомнений относительно авторства** спрашивай меня в диалоге, как тебе поступить, и предложи варианты
7. **НИКОГДА не коммить файлы из `.gitignore`**: Перед добавлением файлов в staging area проверяй `.gitignore`. Файлы из игнорируемых папок (например, `.cursor/`) не должны добавляться в git, даже с флагом `-f`. Эти файлы остаются только локально.

## Проверка коммита

После создания коммита можешь проверить правильность:
```bash
git log -1 --format="Author: %an <%ae>%nCommitter: %cn <%ce>%nMessage: %s"
```

Автор и коммитер должен быть одним и тем же человеком, соответствуя данным из таблицы выше.
