# Правила оформления Требований к программному обеспечению (Software Requirements)

| Дата       | Номер версии | Автор       | Ссылка на задачу                                                                | Комментарий             |
| ---------- | ------------ | ----------- | ------------------------------------------------------------------------------- | ----------------------- |
| 2025-12-05 | v1.0         | Когановский | [2025-11-30_Koganovsky.md](../../task-tracker/3_done/2025-11-30_Koganovsky.md) | Первая версия документа |



## 1. Цель документа

Данный документ определяет специфичные правила оформления **Требований к программному обеспечению (Software Requirements, SWR)** в проекте ITSIMS. Документ является дополнением к [Общим правилам оформления артефактов](./general_artifact_rules.md) и содержит требования, применимые исключительно к артефакту типа "Требования к программному обеспечению".

**Принцип:** Требования к программному обеспечению — это документ технического уровня, который описывает детальную реализацию программных компонентов системы. SWR отвечает на вопрос "**КАК** будет реализовано программное обеспечение для выполнения системных требований".



## 2. Характеристики Требований к программному обеспечению

### 2.1 Основные параметры

| Параметр                  | Значение                                                       |
| ------------------------- | -------------------------------------------------------------- |
| **Префикс документа**     | `SWR` (Software Requirements)                                  |
| **Уровень детализации**   | Технический (максимальный)                                     |
| **Целевая аудитория**     | Разработчики, тестировщики, DevOps-инженеры                    |
| **Ключевой вопрос**       | КАК будет реализовано ПО для выполнения системных требований?  |
| **Технические детали**    | Обязательны (технологии, протоколы, форматы, структуры данных) |
| **Префикс ID требований** | `SWR-` (например: `SWR-F001`, `SWR-API001`, `SWR-DB001`)       |
| **Трассировка вверх**     | К Требованиям к системе (`SR-`)                                |
| **Трассировка вниз**      | —                                                              |

### 2.2 Назначение документа

Требования к программному обеспечению описывают техническую реализацию системы:

- Максимально детализированы
- Содержат технические спецификации (технологии, протоколы, форматы данных)
- Привязаны к конкретным программным модулям и компонентам
- Одно требование системы (SR) может породить несколько требований к ПО (SWR)
- Служат основой для разработки и тестирования программных компонентов
- Самый нижний уровень иерархии требований (не имеет трассировки вниз)



## 3. Обязательная структура Требований к ПО

SWR **должен** содержать следующие разделы в указанном порядке:

```markdown
## 1. Цель документа
## 2. Термины, определения и сокращения
## 3. Архитектура программного обеспечения
   ### 3.1. Компоненты системы
   ### 3.2. Взаимодействие компонентов
## 4. Требования к программным модулям
   ### 4.1. [Модуль 1]
   ### 4.2. [Модуль 2]
   ### 4.N. [Модуль N]
## 5. Требования к данным
   ### 5.1. Структура данных
   ### 5.2. Хранение данных
## 6. Требования к интерфейсам
   ### 6.1. API
   ### 6.2. Пользовательский интерфейс
## 7. Технологические требования
## 8. Требования к развёртыванию
## 9. Связанные документы
```

### 3.1 Пояснения к разделам

#### Раздел 3: Архитектура программного обеспечения

Описывает общую структуру системы на техническом уровне:

**3.1. Компоненты системы:**
- Перечень основных программных модулей и их назначение
- Используемые технологии для каждого компонента
- Зависимости между компонентами

**3.2. Взаимодействие компонентов:**
- Протоколы обмена данными между компонентами
- Форматы передаваемых данных
- Диаграммы взаимодействия (опционально)

#### Раздел 4: Требования к программным модулям

Основной раздел документа, детально описывает требования к каждому программному модулю.

**Структура описания модуля:**

```markdown
### 4.1. [Название модуля]

#### 4.1.1. Назначение
Краткое описание функций модуля

#### 4.1.2. Функциональные требования
Детальное описание функций модуля с ID требований

#### 4.1.3. Технологии и зависимости
Используемые технологии, библиотеки, фреймворки
```

#### Раздел 5: Требования к данным

**5.1. Структура данных:**
- Описание сущностей (entities)
- Атрибуты сущностей с типами данных
- Связи между сущностями
- Ограничения (constraints)

**5.2. Хранение данных:**
- Технология хранения данных (СУБД, файловое хранилище)
- Схема базы данных (таблицы, индексы)
- Требования к резервному копированию
- Миграции данных

#### Раздел 6: Требования к интерфейсам

**6.1. API:**
- Спецификация REST API (endpoints, методы, параметры)
- Форматы запросов и ответов (JSON schema)
- Коды ответов и обработка ошибок
- Аутентификация и авторизация API

**6.2. Пользовательский интерфейс:**
- Технологии реализации UI (React, Vue, Angular)
- Структура компонентов
- Стейт-менеджмент
- Требования к компонентам UI

#### Раздел 7: Технологические требования

Требования к используемым технологиям:
- Языки программирования и версии
- Фреймворки и библиотеки
- Инструменты разработки
- Системы контроля версий

#### Раздел 8: Требования к развёртыванию

Технические требования к развёртыванию:
- Окружение (Docker, Kubernetes)
- Конфигурация серверов
- Требования к инфраструктуре
- CI/CD процессы



## 4. Формат требований в SWR

### 4.1 Общий формат

Каждое требование в SWR **должно** быть оформлено следующим образом:

```markdown
- **SWR-<тип><номер>:** <Детальная техническая формулировка требования>
  - **Трассировка вверх:** `SR-<идентификатор>`
```

### 4.2 Типы требований и префиксы

| Тип требования                     | Префикс | Пример ID     |
| ---------------------------------- | ------- | ------------- |
| Функциональное требование к модулю | `F`     | `SWR-F001`    |
| Требование к API                   | `API`   | `SWR-API001`  |
| Требование к базе данных           | `DB`    | `SWR-DB001`   |
| Требование к UI компоненту         | `UI`    | `SWR-UI001`   |
| Нефункциональное требование        | `NF`    | `SWR-NF001`   |
| Требование безопасности            | `SEC`   | `SWR-SEC001`  |
| Требование к развёртыванию         | `DEP`   | `SWR-DEP001`  |
| Требование к тестированию          | `TEST`  | `SWR-TEST001` |

### 4.3 Правила формулировки требований

**Обязательные правила:**

1. **Максимальная детализация:** Требование содержит все технические детали для реализации
2. **Конкретные технологии:** Указываются используемые технологии, протоколы, форматы
3. **Привязка к компонентам:** Требование явно указывает, какой модуль/компонент должен реализовать функциональность
4. **Тестируемость:** Требование должно быть однозначно проверяемым
5. **Детализация требований SR:** Каждое SWR-требование детализирует требование из System Requirements

**Примеры корректных требований SWR:**

```markdown
- **SWR-F001:** Модуль "Управление сервисами" должен предоставлять REST API endpoint POST /api/services для создания нового сервиса с JSON payload, содержащим поля: name (string, обязательное), description (string, опциональное), category (string, обязательное), status (enum: planned, active, retired), sla (object), owner_id (integer, обязательное)
  - **Трассировка вверх:** `SR-F001`
  
- **SWR-F002:** Модуль должен валидировать входные данные: name (макс. 255 символов, только буквенно-цифровые и пробелы), status (один из: planned, active, retired), owner_id (должен существовать в таблице users)
  - **Трассировка вверх:** `SR-F001`
  
- **SWR-API001:** API должен возвращать код 201 Created при успешном создании сервиса и JSON объект с полями: id (integer, ID созданного сервиса), created_at (ISO 8601 timestamp)
  - **Трассировка вверх:** `SR-F001`
  
- **SWR-DB001:** Данные о сервисах должны храниться в таблице services с полями: id (serial primary key), name (varchar 255 not null), description (text), category (varchar 100 not null), status (varchar 20 not null), owner_id (integer not null, foreign key users.id), created_at (timestamp), updated_at (timestamp)
  - **Трассировка вверх:** `SR-F001`
```

**Сравнение уровней детализации:**

| Уровень     | Пример требования                                                                                                                                                                                                  |
| ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **ТЗ (TS)** | Система должна обеспечивать возможность добавления нового IT-сервиса в реестр                                                                                                                                      |
| **SR**      | Система должна обеспечивать возможность создания новой записи об IT-сервисе с указанием обязательных атрибутов: уникальный идентификатор, наименование, описание, категория, статус, SLA, ответственный специалист |
| **SWR**     | Модуль "Управление сервисами" должен предоставлять REST API endpoint POST /api/services для создания нового сервиса с JSON payload, содержащим поля: name, description, category, status, sla, owner_id            |

### 4.4 Нумерация требований

- Нумерация **независимая** для каждого типа требований
- Формат: **трёхзначное число с ведущими нулями** (`001`, `002`, ..., `010`, ...)
- Пример последовательности: `SWR-F001`, `SWR-F002`, `SWR-F003`, ..., `SWR-F010`, `SWR-F011`, ...

**Правила нумерации при изменениях:**

- При удалении требования его номер **не переиспользуется** (пропуск в нумерации допустим)
- Новые требования получают **следующий свободный номер** в последовательности
- Изменение формулировки **не изменяет номер** требования

### 4.5 Трассировка требований

Каждое требование SWR **обязательно** должно иметь трассировку вверх (к SR). Трассировка вниз отсутствует (SWR — самый нижний уровень).

**Формат трассировки:**

```markdown
- **SWR-F001:** Модуль "Управление сервисами" должен предоставлять REST API endpoint POST /api/services для создания нового сервиса с JSON payload, содержащим поля: name, description, category, status, sla, owner_id
  - **Трассировка вверх:** `SR-F001`
```

**Правила трассировки:**

- Поле "Трассировка вверх" **обязательно** для всех требований SWR
- Если требование SR не существует, это **ошибка** — каждое SWR должно покрывать требование SR
- Трассировка вниз **не указывается** (самый нижний уровень)
- Допускается множественная трассировка вверх (несколько SR могут породить одно SWR)



## 5. Что ОБЯЗАТЕЛЬНО и РАЗРЕШЕНО в Требованиях к ПО

### 5.1 Что ОБЯЗАТЕЛЬНО

В SWR **обязательно указывать:**

- ✅ Конкретные технологии и версии (React 18, Node.js 20, PostgreSQL 16)
- ✅ Спецификацию API (endpoints, методы, параметры, форматы)
- ✅ Структуру базы данных (таблицы, поля, типы, индексы, ограничения)
- ✅ Форматы данных (JSON, XML, Protobuf) с примерами
- ✅ Протоколы обмена (REST, gRPC, WebSocket)
- ✅ Коды ответов и обработку ошибок
- ✅ Валидацию данных с конкретными правилами
- ✅ Названия библиотек и фреймворков
- ✅ Архитектуру компонентов UI (если есть)

### 5.2 Что РАЗРЕШЕНО

В SWR **разрешено:**

- ✅ Детальное описание алгоритмов
- ✅ Примеры кода (опционально, для иллюстрации)
- ✅ Диаграммы последовательности и классов
- ✅ Схемы баз данных
- ✅ OpenAPI/Swagger спецификации
- ✅ Конфигурации и настройки
- ✅ Требования к производительности с конкретными метриками (например: "200мс на запрос при 100 RPS")



## 6. Примеры оформления разделов SWR

### Пример раздела "Требования к программным модулям"

```markdown
## 4. Требования к программным модулям

### 4.1. Модуль "Управление сервисами"

#### 4.1.1. Назначение

Модуль отвечает за CRUD операции с IT-сервисами через REST API.

#### 4.1.2. Функциональные требования

##### Создание сервиса

- **SWR-F001:** Модуль должен предоставлять REST API endpoint POST /api/services для создания нового сервиса с JSON payload, содержащим поля: name (string, обязательное), description (string, опциональное), category (string, обязательное), status (enum: planned, active, retired), sla (object), owner_id (integer, обязательное)
  - **Трассировка вверх:** `SR-F001`
  
- **SWR-F002:** Модуль должен валидировать входные данные:
  - name: обязательное, макс. 255 символов, только буквенно-цифровые символы, пробелы, дефисы
  - status: обязательное, один из: planned, active, retired
  - owner_id: обязательное, должен существовать в таблице users
  - **Трассировка вверх:** `SR-F001`

##### Коды ответов API

- **SWR-API001:** API должен возвращать следующие HTTP коды:
  - 201 Created — при успешном создании сервиса с JSON телом: `{"id": <integer>, "created_at": "<ISO 8601>"}`
  - 400 Bad Request — при ошибке валидации с JSON телом: `{"error": "<message>", "details": [...]}`
  - 401 Unauthorized — при отсутствии аутентификации
  - 500 Internal Server Error — при внутренней ошибке сервера
  - **Трассировка вверх:** `SR-F001`

#### 4.1.3. Технологии и зависимости

- **Фреймворк:** Express.js 4.x
- **Валидация:** Joi 17.x
- **ORM:** Prisma 5.x
- **Аутентификация:** JWT (jsonwebtoken 9.x)
```

### Пример раздела "Требования к данным"

```markdown
## 5. Требования к данным

### 5.1. Структура данных

#### Сущность "Service"

- **SWR-DB001:** Данные о сервисах должны храниться в таблице services со следующей структурой:
  
  | Поле        | Тип          | Ограничения                                   | Описание                  |
  | ----------- | ------------ | --------------------------------------------- | ------------------------- |
  | id          | serial       | primary key                                   | Уникальный идентификатор  |
  | name        | varchar(255) | not null, unique                              | Название сервиса          |
  | description | text         | nullable                                      | Описание сервиса          |
  | category    | varchar(100) | not null                                      | Категория сервиса         |
  | status      | varchar(20)  | not null, check in (planned, active, retired) | Статус сервиса            |
  | owner_id    | integer      | not null, foreign key users.id                | ID ответственного         |
  | created_at  | timestamp    | not null, default current_timestamp           | Дата создания             |
  | updated_at  | timestamp    | not null, default current_timestamp           | Дата последнего изменения |
  
  - **Трассировка вверх:** `SR-F001`, `SR-F002`

- **SWR-DB002:** Таблица services должна иметь следующие индексы:
  - Уникальный индекс на поле name
  - Индекс на поле category для быстрого поиска
  - Индекс на поле status для фильтрации
  - **Трассировка вверх:** `SR-F004`

### 5.2. Хранение данных

- **SWR-DB003:** В качестве СУБД должна использоваться PostgreSQL версии 16.x или выше
  - **Трассировка вверх:** `SR-NF001`
  
- **SWR-DB004:** Резервное копирование базы данных должно выполняться ежедневно в 02:00 UTC с использованием pg_dump
  - **Трассировка вверх:** `SR-NF002`
```

### Пример раздела "Требования к интерфейсам"

```markdown
## 6. Требования к интерфейсам

### 6.1. API

#### Спецификация REST API

- **SWR-API002:** Базовый URL API: `/api/v1`
  - **Трассировка вверх:** `SR-INT001`

- **SWR-API003:** Все запросы и ответы API должны использовать формат JSON с заголовком `Content-Type: application/json`
  - **Трассировка вверх:** `SR-INT001`

- **SWR-API004:** API должен поддерживать аутентификацию через JWT токен в заголовке `Authorization: Bearer <token>`
  - **Трассировка вверх:** `SR-SEC001`

#### Endpoints

**POST /api/v1/services**

- **SWR-API005:** Создание нового сервиса
  - **Запрос:**
    ```json
    {
      "name": "string",
      "description": "string (optional)",
      "category": "string",
      "status": "planned | active | retired",
      "sla": {
        "availability": "number (0-100)",
        "response_time": "number (ms)"
      },
      "owner_id": "integer"
    }
    ```
  - **Ответ (201):**
    ```json
    {
      "id": "integer",
      "created_at": "ISO 8601 timestamp"
    }
    ```
  - **Трассировка вверх:** `SR-F001`

### 6.2. Пользовательский интерфейс

- **SWR-UI001:** Пользовательский интерфейс должен быть реализован на React 18.x с использованием TypeScript 5.x
  - **Трассировка вверх:** `SR-UI001`
  
- **SWR-UI002:** Управление состоянием должно осуществляться через Redux Toolkit 2.x
  - **Трассировка вверх:** `SR-UI001`
  
- **SWR-UI003:** UI компоненты должны быть адаптивными с использованием CSS Grid и Flexbox, поддерживая breakpoints: 768px (tablet), 1024px (desktop)
  - **Трассировка вверх:** `SR-UI002`
```

### Пример раздела "Технологические требования"

```markdown
## 7. Технологические требования

### 7.1. Backend

- **SWR-TECH001:** Серверная часть должна быть реализована на Node.js версии 20.x LTS
  - **Трассировка вверх:** `SR-NF003`
  
- **SWR-TECH002:** В качестве web-фреймворка должен использоваться Express.js версии 4.x
  - **Трассировка вверх:** `SR-NF003`

### 7.2. Frontend

- **SWR-TECH003:** Клиентская часть должна быть реализована на React версии 18.x с TypeScript 5.x
  - **Трассировка вверх:** `SR-UI001`
  
- **SWR-TECH004:** Сборка проекта должна выполняться с помощью Vite версии 5.x
  - **Трассировка вверх:** `SR-UI001`

### 7.3. База данных

- **SWR-TECH005:** В качестве СУБД должна использоваться PostgreSQL версии 16.x или выше
  - **Трассировка вверх:** `SR-NF001`
```



## N. Связанные документы

### Общие правила оформления артефактов

- [Общие правила оформления артефактов](./general_artifact_rules.md) — базовые требования к структуре и формату всех артефактов проекта

### Другие типы артефактов

- [Правила оформления Технического задания](./1_technical_specification_rules.md) — специфичные правила для ТЗ (TS)
- [Правила оформления Требований к системе](./2_system_requirements_rules.md) — специфичные правила для System Requirements (SR)

### Общие принципы форматирования

- [Общие принципы оформления документов](../../planning/formatting/formatting_principles.md) — универсальные правила форматирования для всего проекта
- [Структура документа](../../planning/formatting/document_structure.md) — обязательные и рекомендуемые элементы любого документа

### Артефакты проекта

- [Требования к программному обеспечению](../3_software_requirements.md) — артефакт, к которому применяются правила из данного документа (будет создан позже)
- [README артефактов](../README.md) — описание структуры и назначения директории artifacts/
