# Общие правила оформления артефактов проекта

| Дата       | Номер версии | Автор       | Ссылка на задачу                                                               | Комментарий             |
| ---------- | ------------ | ----------- | ------------------------------------------------------------------------------ | ----------------------- |
| 2025-12-05 | v1.0         | Когановский | [2025-11-30_Koganovsky.md](../../task-tracker/3_done/2025-11-30_Koganovsky.md) | Первая версия документа |

## Оглавление

- [1. Цель документа](#1-цель-документа)
- [2. Обязательные элементы структуры артефакта](#2-обязательные-элементы-структуры-артефакта)
- [3. Специфика разных типов артефактов](#3-специфика-разных-типов-артефактов)
- [4. Правила работы с требованиями](#4-правила-работы-с-требованиями)
- [5. Связанные документы](#5-связанные-документы)



## 1. Цель документа

Данный документ определяет единые стандарты оформления всех артефактов проекта ITSIMS (Техническое задание, Требования к системе, Требования к ПО). 

Документ предназначен для всех членов команды, участвующих в создании и редактировании артефактов проекта. Особое внимание уделяется механизму трассировки требований между документами разных уровней.

**Принцип:** Артефакты проекта должны быть единообразными, понятными и обеспечивать прозрачную трассировку требований от высокого уровня (ТЗ) до технической реализации (ПО).



## 2. Обязательные элементы структуры артефакта

Общие правила структуры документов описаны в [Общих правилах к структуре документа](../../planning/formatting/document_structure.md). Ниже приведены только **уточнения и дополнения**, специфичные для артефактов проекта.

### 2.1 Заголовок документа

**Примеры для артефактов:**
- `# Техническое задание`
- `# Требования к системе`
- `# Требования к программному обеспечению`

Подробнее см. [раздел 2.1](../../planning/formatting/document_structure.md#21-заголовок-документа) в документе "Структура документа".

### 2.2 Подзаголовок

**Обязательный элемент** для артефактов. Указывает название системы или проекта.

**Формат:**
```markdown
# Техническое задание

На разработку Автоматизированной информационной системы учёта IT-сервисов
```

### 2.3 Таблица версионирования

Следуй общим правилам из [раздела 2.2](../../planning/formatting/document_structure.md#22-таблица-версионирования).

**Важное уточнение для артефактов:** При значительных изменениях требований (добавление, удаление, изменение формулировки) обязательно увеличивай мажорную версию.

### 2.4 Оглавление

**Расположение:** Между таблицей версионирования и разделом "Цель документа".

**Формат:** Автоматически генерируемое оглавление или ручной список ссылок на разделы.

**Пример:**

```markdown
## Оглавление

- [1. Цель документа](#1-цель-документа)
- [2. Термины и определения](#2-термины-и-определения)
- [3. Функциональные требования](#3-функциональные-требования)
  - [3.1. Управление реестром сервисов](#31-управление-реестром-сервисов)
  - [3.2. Моделирование связей](#32-моделирование-связей)
- [4. Нефункциональные требования](#4-нефункциональные-требования)
- [5. Связанные документы](#5-связанные-документы)
```

**Правила:**
- Оглавление обязательно для артефактов
- Используй якоря Markdown для навигации, если артефакт использует формат Markdown
- Структура оглавления должна отражать иерархию разделов документа
- Глубина оглавления может быть различной по усмотрению автора

### 2.5 Раздел "Цель документа"

Следуй общим правилам из [раздела 2.3](../../planning/formatting/document_structure.md#23-раздел-с-описанием-цели-документа).

### 2.6 Раздел "Термины, определения и сокращения"

**Название раздела:** `## N. Термины, определения и сокращения` (где N — номер раздела).

**Назначение:** Установить единое понимание ключевых понятий, используемых в артефакте. Раздел фиксирует базовую терминологию проекта и специфичные термины данного документа.

**Структура раздела:**

Раздел **должен** содержать три подраздела в следующем порядке:

#### 2.6.1 Базовые термины проекта

Определения ключевых участников и объектов проекта. Эти термины **обязательны** для всех артефактов.

НАПРИМЕР, здесь можно указать:
- Кто такой заказчик, или кого мы будем называть заказчиком
- Что значит слово система, или что мы будем называть системой
- Кто такие пользователи, или кого мы будем называть пользователем
- Кто такой администратор...
- Что такое сервис...

Данный подраздел будет пополняться в процессе написания артефакта по аналогии с оглавлением.

**Пример:**

```markdown
### N.1. Базовые термины

- **Заказчик** — Юридическое лицо (организация), представителем которого является Суставов С.А., инициирующий внедрение Системы с целью централизации управления IT-сервисами в своей организации
- **Система** — Автоматизированная информационная система учёта IT-сервисов (ITSIMS)
- **Пользователь** — Сотрудник организации-заказчика, имеющий доступ к Системе для выполнения своих рабочих функций
- **Администратор системы** — Пользователь с расширенными правами для управления Системой, учётными записями и настройками
```

#### 2.6.2 Специфичные термины артефакта

Термины, используемые в данном конкретном артефакте. Определяют предметную область и функциональность системы.

**Пример:**

```markdown
### N.2. Специфичные термины

- **Сервис (IT-сервис)** — Программное или аппаратное решение, предоставляющее определённые функции или ценность пользователям в рамках ИТ-инфраструктуры организации
```

#### 2.6.3 Сокращения и аббревиатуры

Все аббревиатуры, используемые в документе, с их расшифровкой.

**Формат:** `Аббревиатура (расшифровка, язык) — краткое пояснение`

**Пример:**

```markdown
### N.3. Сокращения и аббревиатуры

- **API (Application Programming Interface, англ.)** — Программный интерфейс приложения
- **CMDB (Configuration Management Database, англ.)** — База данных управления конфигурациями
- **RBAC (Role-Based Access Control, англ.)** — Управление доступом на основе ролей
- **SLA (Service Level Agreement, англ.)** — Соглашение об уровне обслуживания
- **ТЗ** — Техническое задание
```

**Общие правила:**

- Базовые термины **одинаковы** для всех артефактов проекта (переиспользуются)
- Специфичные термины **уникальны** для каждого артефакта
- Сокращения указываются **все без исключения**, даже общеизвестные
- Термины внутри подразделов могут быть в алфавитном порядке (рекомендуется)
- Формат записи см. в [разделе 9.2](../../planning/formatting/formatting_principles.md#92-термины-и-определения)

### 2.7 Основные разделы

**Содержание:** Зависит от типа артефакта (см. [раздел 3](#3-специфика-разных-типов-артефактов)). В основном - это разделы с требованиями разных типов.

**Общие правила:** См. [раздел 2.4](../../planning/formatting/document_structure.md#24-основное-содержание) в документе "Структура документа".

### 2.8 Раздел "Связанные документы"

Следуй общим правилам из [раздела 2.5](../../planning/formatting/document_structure.md#25-раздел-связанные-документы).

**Обязательно включай ссылки на:**
- Другие артефакты проекта (если есть связь)
- Таблицу трассировки требований (если артефакт содержит требования)
- Общие правила оформления артефактов (этот документ)



## 3. Специфика разных типов артефактов

В проекте ITSIMS используются три основных типа артефактов, образующих иерархию требований. Каждый тип артефакта имеет свою специфику, целевую аудиторию и уровень детализации.

**Для каждого типа артефакта существует отдельный документ с детальными правилами оформления.**

### 3.1 Техническое задание (ТЗ)

Высокоуровневый документ, определяющий требования заказчика к системе. Отвечает на вопрос "**ЧТО** должна делать система с точки зрения бизнеса".

**Ключевые характеристики:**
- **Префикс документа:** `TS` (Technical Specification)
- **Префикс требований:** `TS-` (например: `TS-F001`, `TS-NF001`, `TS-I001`)
- **Уровень детализации:** Высокоуровневый (без технических деталей)
- **Целевая аудитория:** Заказчик, бизнес-аналитики, менеджеры
- **Трассировка:** Вниз к System Requirements (`SR-`)
- **Приоритизация:** Все требования приоритизированы по методу MoSCoW для планирования итераций разработки

**Подробные правила оформления:** [Правила оформления Технического задания](./1_technical_specification_rules.md)

### 3.2 Требования к системе (System Requirements)

Документ среднего уровня детализации, описывающий поведение системы на системном уровне. Отвечает на вопрос "**КАК** система будет реализовывать требования заказчика на системном уровне".

**Ключевые характеристики:**
- **Префикс документа:** `SR` (System Requirements)
- **Префикс требований:** `SR-` (например: `SR-F001`, `SR-NF001`, `SR-SEC001`, `SR-UI001`)
- **Уровень детализации:** Системный (поведение системы без привязки к технологиям)
- **Целевая аудитория:** Системные архитекторы, бизнес-аналитики, тимлид
- **Трассировка:** Вверх к ТЗ (`TS-`), вниз к Software Requirements (`SWR-`)

**Подробные правила оформления:** [Правила оформления Требований к системе](./2_system_requirements_rules.md)

### 3.3 Требования к программному обеспечению (Software Requirements)

Документ технического уровня, описывающий детальную реализацию программных компонентов. Отвечает на вопрос "**КАК** будет реализовано программное обеспечение для выполнения системных требований".

**Ключевые характеристики:**
- **Префикс документа:** `SWR` (Software Requirements)
- **Префикс требований:** `SWR-` (например: `SWR-F001`, `SWR-API001`, `SWR-DB001`)
- **Уровень детализации:** Технический (с конкретными технологиями, протоколами, форматами)
- **Целевая аудитория:** Разработчики, тестировщики, DevOps-инженеры
- **Трассировка:** Вверх к System Requirements (`SR-`)

**Подробные правила оформления:** [Правила оформления Требований к ПО](./3_software_requirements_rules.md)

### 3.4 Сравнительная таблица типов артефактов

| Характеристика         | Техническое задание (TS)      | Требования к системе (SR)        | Требования к ПО (SWR)         |
| ---------------------- | ----------------------------- | -------------------------------- | ----------------------------- |
| **Уровень**            | Высокий (бизнес)              | Средний (системный)              | Низкий (технический)          |
| **Вопрос**             | ЧТО делать?                   | КАК система это делает?          | КАК ПО это реализует?         |
| **Аудитория**          | Заказчик, аналитики           | Архитекторы, аналитики           | Разработчики, тестировщики    |
| **Детализация**        | Общая                         | Детальная (без технологий)       | Максимальная (с технологиями) |
| **Префикс ID**         | `TS-`                         | `SR-`                            | `SWR-`                        |
| **Формат нумерации**   | `TS-F001`, `TS-NF001`         | `SR-F001`, `SR-SEC001`           | `SWR-F001`, `SWR-API001`      |
| **Технические детали** | Запрещены                     | Минимальны                       | Обязательны                   |
| **Трассировка вверх**  | —                             | К ТЗ (`TS-`)                     | К System Requirements (`SR-`) |
| **Трассировка вниз**   | К System Requirements (`SR-`) | К Software Requirements (`SWR-`) | К программной реализации      |

### 3.5 Общие правила для всех типов артефактов

Независимо от типа артефакта, **обязательно соблюдать:**

1. **Формат требований** — см. [раздел 4](#4-правила-работы-с-требованиями)
2. **Трассировку** — каждое требование должно быть связано с требованиями других уровней (кроме корневых ТЗ)
3. **Версионирование** — обновление таблицы версий при любых изменениях
4. **Актуальность терминов** — термины должны быть согласованы между артефактами
5. **Приоритизацию требований** — для Технического задания обязательна приоритизация по методу MoSCoW (см. [раздел 3.1](#31-техническое-задание-тз))



## 4. Правила работы с требованиями

Данный раздел описывает универсальные правила работы с требованиями, применимые ко всем типам артефактов проекта ITSIMS.

**Важно:** Префикс требования для каждого типа артефакта см. в соответствующих документах ([раздел 3](#3-специфика-разных-типов-артефактов)).

### 4.1 Форматирование требований

Подраздел описывает визуальное представление требований в документах и их идентификацию.

#### 4.1.1 Структура требования

Каждое требование **должно** быть оформлено в следующем формате:

```markdown
- <a id="<req-id>"></a>**<PREFIX>-<TYPE><NUMBER>:** <Формулировка требования> [↑](...) [↓](...)
```

**Компоненты структуры требования:**

| Компонент               | Описание                                                         | Обязательность  | Примеры                               |
| ----------------------- | ---------------------------------------------------------------- | --------------- | ------------------------------------- |
| `<a id="req-id"></a>`   | HTML-якорь для навигации из таблиц трассировки                   | **Обязательно** | `<a id="ts-f001"></a>`                |
| **PREFIX**              | Префикс типа артефакта                                           | **Обязательно** | `TS`, `SR`, `SWR`                     |
| **TYPE**                | Тип требования (функциональное, безопасность и т.д.)             | **Обязательно** | `F`, `NF`, `SEC`, `API`               |
| **NUMBER**              | Трёхзначный порядковый номер                                     | **Обязательно** | `001`, `042`, `123`                   |
| Формулировка требования | Текст требования (см. [раздел 4.2](#42-формулировка-требований)) | **Обязательно** | "Система должна..."                   |
| `[↑]`                   | Ссылка на трассировку вверх (к требованиям верхнего уровня)      | Опционально     | `[↑](../2_TS_to_SR.md#sr-f001-up)`    |
| `[↓]`                   | Ссылка на трассировку вниз (к требованиям нижнего уровня)        | Опционально     | `[↓](../4_SR_to_SWR.md#sr-f001-down)` |

**Примеры требований с полной структурой:**

```markdown
<!-- Требование из ТЗ (только трассировка вниз) -->
- <a id="ts-f001"></a>**TS-F001:** Система должна обеспечивать возможность добавления IT-сервиса [↓](../2_TS_to_SR.md#ts-f001-down)

<!-- Требование из Требований к системе (трассировка вверх и вниз) -->
- <a id="sr-f001"></a>**SR-F001:** Система должна обеспечивать создание записи IT-сервиса с указанием атрибутов [↑](../2_TS_to_SR.md#sr-f001-up) [↓](../4_SR_to_SWR.md#sr-f001-down)

<!-- Требование из Требований к ПО (только трассировка вверх) -->
- <a id="swr-api001"></a>**SWR-API001:** Модуль должен предоставлять endpoint POST /api/services [↑](../4_SR_to_SWR.md#swr-api001-up)
```

**Правила применения элементов:**

| Артефакт                  | Якорь | Трассировка ↑ | Трассировка ↓ |
| ------------------------- | ----- | ------------- | ------------- |
| Техническое задание (TS)  | ✅     | ❌             | ✅             |
| Требования к системе (SR) | ✅     | ✅             | ✅             |
| Требования к ПО (SWR)     | ✅     | ✅             | ❌             |

**Пояснения:**
- **Якорь** — обязателен для всех требований, обеспечивает навигацию из таблиц трассировки к требованию. Подробнее про правила создания якорей см. в подразделе [Правила создания якорей](#433-правила-создания-якорей)
- **Трассировка ↑** — отсутствует в ТЗ (корневой уровень), присутствует в SR и SWR
- **Трассировка ↓** — отсутствует в SWR (конечный уровень), присутствует в ТЗ и SR
- **Ссылки на трассировку опциональны**, но рекомендуются для удобства навигации

Подробнее о трассировке см. [раздел 4.3](#43-трассировка-требований).

#### 4.1.2 Нумерация требований

**Общие правила:**

1. **Независимая нумерация** для каждого типа требований внутри артефакта
2. **Трёхзначный формат** с ведущими нулями: `001`, `002`, ..., `010`, ..., `999`
3. **Сквозная нумерация** в порядке появления требований в документе

**Примеры:**
```markdown
TS-F001, TS-F002, TS-F003, ..., TS-F010, TS-F011
TS-NF001, TS-NF002, TS-NF003
SR-F001, SR-F002, SR-F003
SR-SEC001, SR-SEC002
```

**Правила изменения нумерации:**

| Действие                     | Правило                                                  |
| ---------------------------- | -------------------------------------------------------- |
| Добавление нового требования | Присваивается следующий свободный номер                  |
| Удаление требования          | Номер НЕ переиспользуется (пропуск в последовательности) |
| Изменение формулировки       | Номер сохраняется                                        |
| Изменение типа требования    | Создаётся новое требование с новым номером               |

**Пример с пропуском:**
```markdown
TS-F001: Требование 1
TS-F002: Требование 2 (удалено)
TS-F003: Требование 3
TS-F004: Новое требование (добавлено позже)
```

#### 4.1.3 Группировка требований

Требования **должны** группироваться по функциональным блокам или категориям с использованием подразделов.

**Пример структуры:**

```markdown
### 6.1. Функциональные требования

#### 6.1.1. Управление реестром сервисов

- <a id="ts-f001"></a>**TS-F001:** Система должна обеспечивать возможность добавления IT-сервиса [↓](../2_TS_to_SR.md#ts-f001-down)
- <a id="ts-f002"></a>**TS-F002:** Система должна обеспечивать возможность редактирования IT-сервиса [↓](../2_TS_to_SR.md#ts-f002-down)
- <a id="ts-f003"></a>**TS-F003:** Система должна обеспечивать возможность удаления IT-сервиса [↓](../2_TS_to_SR.md#ts-f003-down)

#### 6.1.2. Поиск и фильтрация

- <a id="ts-f004"></a>**TS-F004:** Система должна обеспечивать поиск IT-сервиса по названию [↓](../2_TS_to_SR.md#ts-f004-down)
- <a id="ts-f005"></a>**TS-F005:** Система должна обеспечивать фильтрацию по категории [↓](../2_TS_to_SR.md#ts-f005-down)
```

**Преимущества группировки:**
- Улучшает читаемость документа
- Упрощает навигацию
- Логически объединяет связанные требования
- Облегчает поиск конкретных требований

### 4.2 Формулировка требований

Подраздел описывает правила текстового представления требований для обеспечения единообразия, ясности и проверяемости.

#### 4.2.1 Язык формулировки требования

Все требования **должны** формулироваться в следующем формате:

```
Система должна <глагол в инфинитиве> <описание>
```

**Примеры правильных формулировок:**
- ✅ Система должна **обеспечивать** возможность добавления нового IT-сервиса
- ✅ Система должна **поддерживать** одновременную работу не менее 50 пользователей
- ✅ Модуль должен **предоставлять** REST API endpoint для создания сервиса

**Примеры в контексте требований с якорями:**
```markdown
- <a id="ts-f001"></a>**TS-F001:** Система должна обеспечивать возможность добавления нового IT-сервиса
- <a id="ts-nf001"></a>**TS-NF001:** Система должна поддерживать одновременную работу не менее 50 пользователей
- <a id="swr-api001"></a>**SWR-API001:** Модуль должен предоставлять REST API endpoint для создания сервиса
```

**Запрещенные формулировки:**
- ❌ Система обеспечивает... (настоящее время)
- ❌ Система будет обеспечивать... (будущее время)
- ❌ Добавить возможность... (повелительное наклонение)
- ❌ Можно добавить сервис... (неопределённая формулировка)

#### 4.2.2 Атомарность требований

Каждое требование **должно** описывать **одну** функцию, характеристику или ограничение системы.

**Примеры корректных (атомарных) требований:**

```markdown
✅ <a id="ts-f001"></a>**TS-F001:** Система должна обеспечивать возможность добавления IT-сервиса
✅ <a id="ts-f002"></a>**TS-F002:** Система должна обеспечивать возможность редактирования IT-сервиса
✅ <a id="ts-f003"></a>**TS-F003:** Система должна обеспечивать возможность удаления IT-сервиса
```

**Примеры некорректных (составных) требований:**

```markdown
❌ TS-F001: Система должна обеспечивать возможность добавления, редактирования и удаления IT-сервисов
```

**Исправление:** Разбить на три отдельных требования (как в корректном примере выше).

#### 4.2.3 Проверяемость и измеримость требований

Каждое требование **должно** быть проверяемым и, где возможно, измеримым.

**Хорошие (проверяемые) требования:**

```markdown
✅ <a id="ts-nf001"></a>**TS-NF001:** Система должна поддерживать одновременную работу не менее 50 пользователей
✅ <a id="ts-nf002"></a>**TS-NF002:** Система должна обеспечивать время отклика не более 3 секунд при поиске
✅ <a id="sr-nf001"></a>**SR-NF001:** Система должна обеспечивать доступность 99.5% времени
```

**Плохие (непроверяемые) требования:**

```markdown
❌ TS-NF001: Система должна быть быстрой
❌ TS-NF002: Система должна хорошо масштабироваться
❌ TS-NF003: Интерфейс должен быть удобным
```

**Критерии проверяемости:**

- Можно ли однозначно проверить выполнение требования?
- Есть ли конкретные метрики или критерии?
- Можно ли написать тест-кейс для проверки требования?

#### 4.2.4 Полнота и недвусмысленность формулировки

**Требования должны быть:**

1. **Полными** — содержать всю необходимую информацию
2. **Недвусмысленными** — допускать только одно толкование
3. **Непротиворечивыми** — не конфликтовать с другими требованиями

**Примеры:**

```markdown
✅ Хорошо: Система должна отправлять email-уведомление пользователю в течение 5 минут после создания заявки
❌ Плохо: Система должна отправлять уведомления быстро

✅ Хорошо: Система должна хранить пароли пользователей в виде хеша с использованием алгоритма bcrypt
❌ Плохо: Система должна безопасно хранить пароли
```

### 4.3 Трассировка требований

Трассировка обеспечивает связь между требованиями разных уровней, позволяя отследить, как высокоуровневые требования реализуются на более детальных уровнях.

**Ключевая идея:** Трассировка ведётся через отдельные файлы с двумя таблицами (прямая и обратная трассировка), а не в тексте требований. Это упрощает навигацию и поддержку связей между артефактами.

#### 4.3.1 Направления трассировки

**Трассировка вверх (обратная)** — связь с требованиями более высокого уровня:
- Показывает, какое требование вышестоящего артефакта детализирует данное требование
- **Обязательна** для требований SR и SWR
- **Отсутствует** для требований TS (корневой уровень)

**Трассировка вниз (прямая)** — связь с требованиями более низкого уровня:
- Показывает, какие требования нижестоящего артефакта реализуют данное требование
- **Опциональна**, добавляется по мере создания нижестоящих артефактов
- **Отсутствует** для требований SWR (конечный уровень)

#### 4.3.2 Метод двухтабличной трассировки

Между двумя артефактами создаётся **отдельный файл трассировки** с двумя взаимосвязанными таблицами.

**Пример:** Трассировка между `1_technical_specification.md` (ТЗ) и `3_system_requirements.md` (Требования к системе).

**Таблица 1: Трассировка вниз (от ТЗ к Требованиям к системе)**

| Требование верхнего уровня                                                   | Трассировка вниз                                                                                                                                 |
| ---------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| <a id="ts-f001-down"></a>[TS-F001](../1_technical_spectification#ts-f001)    | [SR-F001](../3_system_requirements.md#sr-f001), [SR-F002](../3_system_requirements.md#sr-f002), [SR-UI001](../3_system_requirements.md#sr-ui001) |
| <a id="ts-f002-down"></a>[TS-F002](../1_technical_spectification#ts-f002)    | [SR-F003](../3_system_requirements.md#sr-f003), [SR-F004](../3_system_requirements.md#sr-f004)                                                   |
| <a id="ts-nf001-down"></a>[TS-NF001](../1_technical_spectification#ts-nf001) | [SR-NF001](../3_system_requirements.md#sr-nf001), [SR-NF002](../3_system_requirements.md#sr-nf002)                                               |

**Таблица 2: Трассировка вверх (от Требований к системе к ТЗ)**

| Требование нижнего уровня                                                | Трассировка вверх                                    |
| ------------------------------------------------------------------------ | ---------------------------------------------------- |
| <a id="sr-f001-up"></a>[SR-F001](../3_system_requirements.md#sr-f004)    | [TS-F001](../1_technical_specification.md#ts-f004)   |
| <a id="sr-f002-up"></a>[SR-F002](../3_system_requirements.md#sr-f002)    | [TS-F001](../1_technical_specification.md#ts-f001)   |
| <a id="sr-f003-up"></a>[SR-F003](../3_system_requirements.md#sr-f003)    | [TS-F002](../1_technical_specification.md#ts-f002)   |
| <a id="sr-f004-up"></a>[SR-F004](../3_system_requirements.md#sr-f004)    | [TS-F002](../1_technical_specification.md#ts-f002)   |
| <a id="sr-ui001-up"></a>[SR-UI001](../3_system_requirements.md#sr-ui001) | [TS-F001](../1_technical_specification.md#ts-f001)   |
| <a id="sr-nf001-up"></a>[SR-NF001](../3_system_requirements.md#sr-nf001) | [TS-NF001](../1_technical_specification.md#ts-nf001) |
| <a id="sr-nf002-up"></a>[SR-NF002](../3_system_requirements.md#sr-nf002) | [TS-NF001](../1_technical_specification.md#ts-nf001) |

**Примечание:** Одна таблица легко составляется из другой — они содержат одни и те же связи, но в разных направлениях. ID требований в таблице являются ссылками на конкретные требования в артефактах.

#### 4.3.3 Правила создания якорей

**4.3.3.1 Якоря в таблицах трассировки**

Каждая строка таблицы трассировки **должна** содержать HTML-якорь для ссылок из артефактов.

**Формат якоря в таблице трассировки:**
```html
<a id="<req-id>-<direction>"></a><REQ-ID>
```

**Компоненты:**
- `<req-id>` — ID требования в нижнем регистре (например: `ts-f001`, `sr-f002`)
- `<direction>` — направление трассировки: `down` (вниз) или `up` (вверх)
- `<REQ-ID>` — ID требования в исходном формате (например: `TS-F001`, `SR-F002`)

**Примеры якорей в таблицах:**
```html
<a id="ts-f001-down"></a>TS-F001      <!-- для строки с трассировкой вниз -->
<a id="sr-f001-up"></a>SR-F001        <!-- для строки с трассировкой вверх -->
<a id="ts-nf001-down"></a>TS-NF001    <!-- для нефункц. требования вниз -->
```

**Правила для таблиц трассировки:**
- Якорь размещается **в первой колонке** таблицы (перед ID требования)
- Якорь **не должен** содержать пробелов
- Используется префикс `down` для таблицы прямой трассировки и `up` для обратной

**4.3.3.2 Якоря в артефактах**

Каждое требование в артефакте **должно** иметь HTML-якорь для ссылок из таблиц трассировки.

**Формат якоря в артефакте:**
```html
<a id="<req-id>"></a>
```

**Пример требования с якорем в артефакте:**
```markdown
- <a id="ts-f001"></a>**TS-F001:** Система должна обеспечивать возможность добавления IT-сервиса [↓](../2_TS_to_SR.md#ts-f001-down)
- <a id="sr-f001"></a>**SR-F001:** Система должна обеспечивать создание записи IT-сервиса... [↑](../2_TS_to_SR.md#sr-f001-up) [↓](../4_SR_to_SWR.md#sr-f001-down)
```

**Правила для якорей в артефактах:**
- Якорь размещается **перед ID требования** (до `**`)
- Используется только ID требования в нижнем регистре (без суффикса `-up` или `-down`)
- Якорь обеспечивает двустороннюю навигацию: из таблицы трассировки можно перейти к требованию в артефакте

#### 4.3.4 Ссылки на трассировку из артефактов

Из текста артефакта можно ссылаться на строку в таблице трассировки с помощью якорей.

**Пример ссылки из ТЗ (`1_technical_specification.md`):**

```markdown
- <a id="ts-f001"></a>**TS-F001:** Система должна обеспечивать возможность добавления IT-сервиса [↓](../2_TS_to_SR.md#ts-f001-down)
```

**Пример ссылки из Требований к системе (`3_system_requirements.md`):**

```markdown
- <a id="sr-f001"></a>**SR-F001:** Система должна обеспечивать создание записи IT-сервиса с указанием атрибутов... [↑](../2_TS_to_SR.md#sr-f001-up) [↓](../4_SR_to_SWR.md#sr-f001-down)
```

**Правила:**
- Используй символ **`[↑]`** для трассировки вверх и **`[↓]`** для трассировки вниз
- Каждое требование **должно** иметь якорь `<a id="req-id"></a>` для обратных ссылок из таблиц трассировки
- Ссылки ведут на конкретную строку таблицы через якорь
- Ссылки **опциональны** и размещаются **в конце** формулировки требования для компактности
- Ссылки оформляются inline (в одну строку с требованием)

#### 4.3.5 Правила трассировки

| Правило                                 | Описание                                                                  |
| --------------------------------------- | ------------------------------------------------------------------------- |
| **Полнота покрытия**                    | Каждое требование (кроме TS) должно иметь трассировку вверх               |
| **Множественная трассировка**           | Одно требование может быть связано с несколькими требованиями             |
| **Трассировка только соседних уровней** | TS ↔ SR ↔ SWR (нельзя напрямую связывать TS и SWR)                        |
| **Двусторонняя согласованность**        | Если SR-F001 ссылается на TS-F001, то TS-F001 должен ссылаться на SR-F001 |
| **Уникальность якорей**                 | Каждый якорь в файле трассировки должен быть уникальным                   |

#### 4.3.6 Пропущенная трассировка

Если требования нижестоящего артефакта ещё не созданы, используйте символ `—` (длинное тире) во второй колонке таблицы:

| Требование верхнего уровня                                                   | Трассировка вниз                               |
| ---------------------------------------------------------------------------- | ---------------------------------------------- |
| [TS-F001](../1_technical_specification.md#ts-f001) <a id="ts-f001-down"></a> | —                                              |
| [TS-F002](../1_technical_specification.md#ts-f002) <a id="ts-f002-down"></a> | [SR-F003](../3_system_requirements.md#sr-f003) |

**Символ `—`** указывает, что трассировка будет добавлена позже.

#### 4.3.7 Резюме: Двусторонняя навигация

Метод двухтабличной трассировки обеспечивает **полную двустороннюю навигацию** между артефактами:

**Маршрут 1: Артефакт → Таблица трассировки**
- Из требования в артефакте можно перейти по ссылке `[↑]` или `[↓]` в соответствующую таблицу трассировки

**Маршрут 2: Таблица трассировки → Артефакт**
- Из таблицы трассировки можно кликнуть на ID требования (например, `SR-F001`) и перейти к его описанию в артефакте

**Схема навигации:**

```
Артефакт ТЗ                 Таблица трассировки           Артефакт SR                 Таблица трассировки             Артефакт SWR
┌─────────────────┐        ┌─────────────────────┐       ┌─────────────────┐        ┌──────────────────────┐        ┌──────────────────┐
│ TS-F001 [↓] <──────────> │ TS-F001 │ SR-F001 ─────────>│ SR-F001 [↑] [↓] <───────>│ SR-F001 │ SWR-F001  ─┬──────> │ SWR-F001 [↑]     │
│                 │        │         │ SR-F002 ─────────>│ SR-F002 [↑] [↓] │        │         │ SWR-F002  ─└──────> │ SWR-F002 [↑]     │
│                 │        │         │  (якоря)  │       │     (якоря)     │        │   (якоря)            │        │   (якоря)        │
└─────────────────┘        └─────────────────────┘       └─────────────────┘        └──────────────────────┘        └──────────────────┘
```

**Преимущества:**
- Быстрый переход от требования к его детализации или источнику
- Возможность проверить, какие требования связаны с данным
- Прозрачная связь между уровнями требований
- Удобство при ревью и валидации документов

### 4.4 Размещение требований в файлах

Подраздел описывает физическое размещение требований и таблиц трассировки в структуре проекта.

#### 4.4.1 Размещение требований в артефактах

Требования размещаются **в основных артефактах** в директории `artifacts/`:

```
artifacts/
├── 1_technical_specification.md     # Содержит требования TS-*
├── 3_system_requirements.md         # Содержит требования SR-*
├── 5_software_requirements.md       # Содержит требования SWR-*
└── ...
```

Каждый артефакт содержит все свои требования в соответствующих разделах (см. [раздел 3](#3-специфика-разных-типов-артефактов)).

#### 4.4.2 Размещение таблиц трассировки

Таблицы трассировки размещаются в отдельных файлах **непосредственно в директории** `artifacts/`:

```
artifacts/
├── 1_technical_specification.md
├── 2_TS_to_SR.md                    # Трассировка: ТЗ ↔ Требования к системе
├── 3_system_requirements.md
├── 4_SR_to_SWR.md                   # Трассировка: Требования к системе ↔ Требования к ПО
├── 5_software_requirements.md
└── _formatting/                     # Правила и шаблоны
```

**Логика нумерации:**
- Файлы трассировки размещаются **между** артефактами, которые они связывают
- Нумерация отражает последовательность чтения документов
- Всего в проекте планируется 3 артефакта и 2 файла трассировки (итого 5 файлов)

#### 4.4.3 Правила именования файлов трассировки

**Формат имени файла:**
```
<N>_<PREFIX_UPPER>_to_<PREFIX_LOWER>.md
```

**Примеры:**
- `2_TS_to_SR.md` — трассировка от Технического задания к Требованиям к системе
- `4_SR_to_SWR.md` — трассировка от Требований к системе к Требованиям к ПО

**Правила:**
- Начинается с **порядкового номера** (отражает позицию между артефактами)
- Используй **верхний уровень первым**, затем нижний
- Разделитель: `_to_`
- Расширение: `.md`
- Номер файла трассировки находится между номерами связанных артефактов

#### 4.4.4 Структура файла трассировки

Каждый файл трассировки **должен** содержать следующие элементы в порядке:

1. **Заголовок** с названием связи
2. **Таблицу версионирования** (история изменений файла)
3. **Таблицу прямой трассировки** (от верхнего к нижнему)
4. **Таблицу обратной трассировки** (от нижнего к верхнему)
5. **Раздел "Связанные документы"** со ссылками на артефакты

**Пример структуры файла `2_TS_to_SR.md`:**

```markdown
# Трассировка требований: Техническое задание ↓ Требования к системе

| Дата       | Номер версии | Автор       | Ссылка на задачу | Комментарий             |
| ---------- | ------------ | ----------- | ---------------- | ----------------------- |
| 2025-12-05 | v1.0         | Когановский | [...]            | Первая версия документа |

## Таблица 1: Трассировка вниз (ТЗ ↓ Требования к системе)

| Требование верхнего уровня                                                  | Трассировка вниз                                                                               |
| --------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- |
| <a id="ts-f001-down"></a>[TS-F001](../1_technical_specification.md#ts-f001) | [SR-F001](../3_system_requirements.md#sr-f001), [SR-F002](../3_system_requirements.md#sr-f002) |
| ...                                                                         | ...                                                                                            |

## Таблица 2: Трассировка вверх (Требования к системе ↑ ТЗ)

| Требование нижнего уровня                                             | Трассировка вверх                                  |
| --------------------------------------------------------------------- | -------------------------------------------------- |
| <a id="sr-f001-up"></a>[SR-F001](../3_system_requirements.md#sr-f001) | [TS-F001](../1_technical_specification.md#ts-f001) |
| ...                                                                   | ...                                                |

## Связанные документы

- [Техническое задание](./1_technical_specification.md)
- [Требования к системе](./3_system_requirements.md)
- [Общие правила оформления артефактов](./_formatting/general_artifact_rules.md)
```

**Примечания:**
- Таблица версионирования ведётся по тем же правилам, что и для артефактов (см. [раздел 2.3](#23-таблица-версионирования))
- ID требований во второй колонке являются **кликабельными ссылками** на конкретные требования в артефактах
- Это обеспечивает двустороннюю навигацию: из артефакта в таблицу трассировки и обратно

#### 4.4.5 Обновление трассировки

При добавлении, изменении или удалении требований **обязательно обновляй** соответствующие файлы трассировки и якоря в артефактах:

1. **В артефактах:** Добавь якорь `<a id="req-id"></a>` перед каждым новым требованием
2. **В таблицах трассировки:** Добавь новые строки в обе таблицы (прямую и обратную)
3. **Создай якоря:** Уникальные якоря для новых строк в таблицах (с суффиксами `-up` и `-down`)
4. **Добавь ссылки:** Во второй колонке таблиц сделай ID требований кликабельными ссылками на артефакты
5. **Проверь согласованность:** Убедись, что связи в обеих таблицах симметричны
6. **Обнови версию:** Увеличь версию файла трассировки в таблице версионирования

**Пример обновления:**

```markdown
<!-- В артефакте 1_technical_specification.md -->
- <a id="ts-f010"></a>**TS-F010:** Новое требование [↓](../2_TS_to_SR.md#ts-f010-down)

<!-- В файле 2_TS_to_SR.md, Таблица 1 -->
| <a id="ts-f010-down"></a>TS-F010 | [SR-F025](../3_system_requirements.md#sr-f025) |

<!-- В файле 2_TS_to_SR.md, Таблица 2 -->
| <a id="sr-f025-up"></a>SR-F025 | [TS-F010](../1_technical_specification.md#ts-f010) |
```



## 5. Связанные документы

### Общие правила форматирования

- [Общие принципы оформления документов](../../planning/formatting/formatting_principles.md) — универсальные правила форматирования для всего проекта
- [Структура документа](../../planning/formatting/document_structure.md) — обязательные и рекомендуемые элементы любого документа
- [Руководство по Markdown](../../planning/formatting/markdown_guide.md) — примеры синтаксиса Markdown
- [Выбор формата документа](../../planning/formatting/format_selection.md) — когда использовать Markdown vs LaTeX

### Правила для конкретных артефактов

- [Правила оформления Технического задания](./1_technical_specification_rules.md) — специфичные правила для ТЗ (TS), включая формат требований и систему идентификации
- [Правила оформления Требований к системе](./2_system_requirements_rules.md) — специфичные правила для System Requirements (SR), описание системного уровня
- [Правила оформления Требований к ПО](./3_software_requirements_rules.md) — специфичные правила для Software Requirements (SWR), технический уровень

### Артефакты проекта

- [README артефактов](../README.md) — описание структуры и назначения директории artifacts/
- [Техническое задание](../1_technical_specification.md) — основной артефакт проекта
- [Требования к системе](../2_system_requirements.md) — детализированные системные требования

### Валидация и проверка качества

- [README валидации](../../validations/README.md) — организация проверок и формальных инспекций артефактов
- [Шаблон инспекции ТЗ](../../validations/1_technical_specification/_inspection_template.md) — проверка качества Технического задания
- [Шаблон анализа трассировки ТЗ ↔ SR](../../validations/2_TS_to_SR/_traceability_analysis_template.md) — проверка корректности связей между ТЗ и SR
- [Шаблон инспекции SR](../../validations/3_system_requirements/_inspection_template.md) — проверка качества Системных требований
