# Работа с Git в проекте ITSIMS

| Дата       | Номер версии | Автор  | Ссылка на задачу                                                                | Комментарий             |
| ---------- | ------------ | ------ | ------------------------------------------------------------------------------- | ----------------------- |
| 2025-12-04 | v1.0         | Гречко | [2025-11-29_Grechko.md](../../task-tracker/2_in_progress/2025-11-29_Grechko.md) | Первая версия документа |



## Оглавление

- [1. Цель документа](#1-цель-документа)
- [2. Формат сообщений коммитов](#2-формат-сообщений-коммитов)
- [3. Концепция ветвления, основанного на задачах](#3-концепция-ветвления-основанного-на-задачах)
- [4. Именование веток](#4-именование-веток)
- [5. Жизненный цикл работы над задачей и интеграция с таск-трекером](#5-жизненный-цикл-работы-над-задачей-и-интеграция-с-таск-трекером)
- [6. Работа с несколькими задачами](#6-работа-с-несколькими-задачами)
- [7. Связанные документы](#7-связанные-документы)



## 1. Цель документа

Данный документ описывает процесс работы с Git в проекте ITSIMS. Документ предназначен для всех участников команды, работающих с репозиторием проекта.

Из этого документа вы узнаете:
- Как команда организует работу с ветками (Task-Based Branching)
- Как правильно создавать ветки для задач
- Какой формат использовать для сообщений коммитов
- Как интегрировать работу с Git и таск-трекером

**Принцип:** Каждая задача выполняется в отдельной ветке, что позволяет изолировать работу и сохранить чистую историю изменений.



## 2. Формат сообщений коммитов

### 2.1 Общий формат

Все коммиты в проекте следуют единому формату:

```
<тип>(<область>): <краткое описание>
```

**Язык:** Все сообщения коммитов пишутся **на русском языке**.

### 2.2 Типы коммитов

| Тип        | Когда использовать                    | Пример                                          |
| ---------- | ------------------------------------- | ----------------------------------------------- |
| `feat`     | Новая функциональность                | `feat(spec): добавить раздел требований к API`  |
| `fix`      | Исправление ошибки                    | `fix(spec): исправить опечатку в спецификации`  |
| `style`    | Форматирование, наведение порядка     | `style(spec): выровнять таблицы`                |
| `refactor` | Реструктуризация без изменения смысла | `refactor(spec): перенести раздел в приложение` |
| `remove`   | Удаление лишнего                      | `remove(spec): убрать устаревший раздел`        |
| `chore`    | Вспомогательные действия              | `chore(tasks): взять задачу в работу`           |

### 2.3 Области (scope)

| Область      | Что относится                                   |
| ------------ | ----------------------------------------------- |
| `spec`       | Артефакты: ТЗ, системные требования             |
| `cm`         | План конфигурационного управления               |
| `formatting` | Правила и шаблоны форматирования                |
| `inspection` | Формальная инспекция                            |
| `tasks`      | Таск-трекер: задачи, отчёты                     |
| `tools`      | Инструменты и скрипты проекта                   |
| `validation` | Отчёты валидации                                |
| `docs`       | Общая документация и правила (planning, README) |

### 2.4 Правила написания

1. **Русский язык** — описание всегда на русском
2. **Повелительное наклонение** — "добавить", "исправить", "обновить" (не "добавлено", "исправлено")
3. **Маленькая буква** после двоеточия
4. **Без точки** в конце
5. **Максимум 72 символа**
6. **Область обязательна** — всегда указывай в скобках

### 2.5 Примеры правильных сообщений

```
feat(spec): добавить требования к интерфейсу администратора
fix(tasks): исправить дату в задаче Носова
style(formatting): привести таблицы к единому стилю
refactor(spec): переструктурировать ТЗ по разделам
remove(spec): убрать дублирующийся раздел требований
chore(tasks): переместить задачу в выполненные
chore(tools): обновить скрипт конвертации в PDF
```

### 2.6 Примеры неправильных сообщений

```
❌ Update file                      # На английском языке
❌ Исправлено ТЗ                    # Нет типа и области
❌ fix: опечатка                    # Нет области
❌ feat(spec): Добавить раздел.     # Заглавная буква и точка
❌ fix(spec): исправлены опечатки   # Не повелительное наклонение
❌ feat(spec): добавил новый большой раздел с описанием требований к модулю авторизации  # Слишком длинное (более 72 символов)
```



## 3. Концепция ветвления, основанного на задачах

В проекте ITSIMS используется подход **ветвления, основанного на задачах** — каждая задача из `task-tracker/` выполняется в отдельной ветке.

### 3.1 Основные принципы

**Ветка `main`** — используется только для "мета-работы":
- ✅ Создание задач
- ✅ Создание еженедельных отчётов
- ✅ Обновление правил и инструкций
- ✅ Изменения структуры проекта

**Ветки задач** — вся работа по конкретным задачам:
- ✅ Создание и редактирование артефактов
- ✅ Написание документации
- ✅ Разработка кода системы
- ✅ Любые изменения в рамках конкретной задачи

**Сохранение истории:**
- Ветки не удаляются после завершения работы
- При слиянии используется merge без fast-forward (`--no-ff`)
- В истории Git всегда видно, в какой ветке велась работа



## 4. Именование веток

### 4.1 Формат имени ветки

Все ветки задач именуются по единому формату:

```
task/<ГГГГ-ММ-ДД>_<фамилия-латиницей>
```

**Компоненты:**
- `task/` — префикс для всех веток задач
- `ГГГГ-ММ-ДД` — дата создания задачи (из имени файла задачи)
- `фамилия-латиницей` — фамилия исполнителя транслитом (строчными буквами)

### 4.2 Примеры

**Правильно:**
```
task/2025-12-03_valkovets
task/2025-11-28_nosov
task/2025-11-29_grechko
```

**Неправильно:**
```
❌ feature/api          # Не используем feature-ветки
❌ task/valkovets       # Нет даты
❌ task/2025-12-03      # Нет исполнителя
❌ task/03-12-2025_valkovets  # Неверный формат даты
```

### 4.3 Соответствие фамилий

| Фамилия (RU) | Транслит (EN) | Пример ветки                 |
| ------------ | ------------- | ---------------------------- |
| Баранов      | baranov       | `task/2025-12-01_baranov`    |
| Зацепилин    | zatsepilin    | `task/2025-12-02_zatsepilin` |
| Гречко       | grechko       | `task/2025-11-29_grechko`    |
| Когановский  | koganovsky    | `task/2025-11-29_koganovsky` |
| Вальковец    | valkovets     | `task/2025-12-03_valkovets`  |
| Носов        | nosov         | `task/2025-11-28_nosov`      |
| Ловков       | lovkov        | `task/2025-12-05_lovkov`     |



## 5. Жизненный цикл работы над задачей и интеграция с таск-трекером

### 5.1 Этап 1: Создание задачи (в ветке main)

Задачи создаёт тимлид (Баранов) непосредственно в ветке `main`:

```bash
# Убедись, что ты в main и у тебя последняя версия
git checkout main
git pull origin main

# Создай файл задачи
# Например: task-tracker/1_sprint/2025-12-03_Valkovets.md

# Добавь и закоммить
git add task-tracker/1_sprint/2025-12-03_Valkovets.md
git commit -m "feat(tasks): добавить задачу для Вальковца"
git push origin main
```

> **Примечание:** Обычные участники команды не создают задачи. Если тебе нужна задача — обратись к тимлиду.

### 5.2 Этап 2: Взятие задачи в работу

Когда ты готов приступить к выполнению задачи:

```bash
# Начни с обновления main
git checkout main
git pull origin main

# Создай ветку для задачи
# Имя берётся из имени файла задачи
git checkout -b task/2025-12-03_valkovets

# Перемести задачу в папку "в работе"
git mv task-tracker/1_sprint/2025-12-03_Valkovets.md task-tracker/2_in_progress/

# Закоммить изменение
git add task-tracker/2_in_progress/2025-12-03_Valkovets.md
git commit -m "chore(tasks): взять задачу в работу"

# Отправь ветку на GitHub
git push origin task/2025-12-03_valkovets
```

**Важно:** Используй `git mv` для перемещения файлов — это сохраняет историю в Git.

### 5.3 Этап 3: Работа над задачей

Теперь ты работаешь в ветке задачи. Вся твоя работа фиксируется коммитами:

```bash
# Убедись, что ты в правильной ветке
git branch  # Должна быть отметка * у твоей ветки

# Редактируй файлы согласно задаче
# Например, работа над техническим заданием

# Добавь изменения и закоммить
git add artifacts/1_technical_specification.md
git commit -m "feat(spec): добавить раздел требований к API"
git push origin task/2025-12-03_valkovets

# Продолжай работу с регулярными коммитами
git add artifacts/2_system_requirements.md
git commit -m "feat(spec): создать документ системных требований"
git push origin task/2025-12-03_valkovets
```

**Рекомендации:**
- Делай коммиты регулярно (после каждого логического изменения)
- Следуй [формату сообщений коммитов](#2-формат-сообщений-коммитов)

### 5.4 Этап 4: Завершение задачи

Когда задача выполнена:

```bash
# Убедись, что ты в ветке задачи
git branch  # Проверь текущую ветку

# Перемести задачу в "выполнено"
git mv task-tracker/2_in_progress/2025-12-03_Valkovets.md task-tracker/3_done/

# Закоммить
git add task-tracker/3_done/2025-12-03_Valkovets.md
git commit -m "chore(tasks): завершить задачу"
git push origin task/2025-12-03_valkovets
```

### 5.5 Этап 5: Слияние с main

После завершения задачи её нужно влить в `main`:

```bash
# Переключись на main
git checkout main
git pull origin main

# Слей свою ветку задачи в main
git merge --no-ff task/2025-12-03_valkovets

# Отправь обновлённый main на GitHub
git push origin main
```

**Важно:**
- Флаг `--no-ff` обязателен — он создаёт merge commit и сохраняет историю ветки
- Ветку задачи **НЕ удаляем** — она остаётся в истории проекта
- После слияния можно продолжать работу над другими задачами

### 5.6 Связь веток и задач

Каждая ветка строго соответствует файлу задачи в `task-tracker/`:

| Файл задачи                                      | Ветка Git                   |
| ------------------------------------------------ | --------------------------- |
| `task-tracker/1_sprint/2025-12-03_Valkovets.md`  | `task/2025-12-03_valkovets` |
| `task-tracker/2_in_progress/2025-11-28_Nosov.md` | `task/2025-11-28_nosov`     |

**Правило:** Дата и фамилия в имени ветки берутся из имени файла задачи.

### 5.7 Визуализация жизненного цикла

```
┌─────────────────────────────────────────────────────────┐
│  Файл: task-tracker/1_sprint/2025-12-03_Valkovets.md    │
│  Ветка: main                                            │
│  Статус: Задача создана                                 │
└─────────────────────────────────────────────────────────┘
                        │
                        │ git checkout -b task/2025-12-03_valkovets
                        │ git mv ... 2_in_progress/
                        ▼
┌─────────────────────────────────────────────────────────┐
│  Файл: task-tracker/2_in_progress/2025-12-03_Valkovets.md │
│  Ветка: task/2025-12-03_valkovets                       │
│  Статус: Задача в работе                                │
└─────────────────────────────────────────────────────────┘
                        │
                        │ Работа над задачей
                        │ (много коммитов)
                        ▼
┌─────────────────────────────────────────────────────────┐
│  Файл: task-tracker/3_done/2025-12-03_Valkovets.md      │
│  Ветка: task/2025-12-03_valkovets                       │
│  Статус: Задача завершена                               │
└─────────────────────────────────────────────────────────┘
                        │
                        │ git checkout main
                        │ git merge --no-ff task/2025-12-03_valkovets
                        ▼
┌─────────────────────────────────────────────────────────┐
│  Файл: task-tracker/3_done/2025-12-03_Valkovets.md      │
│  Ветка: main (+ сохранена ветка задачи)                │
│  Статус: Задача в main, ветка остаётся                  │
└─────────────────────────────────────────────────────────┘
```

### 5.8 Полезные команды для работы с задачами

| Действие                    | Команда                                                           |
| --------------------------- | ----------------------------------------------------------------- |
| Взять задачу в работу       | `git mv task-tracker/1_sprint/<файл> task-tracker/2_in_progress/` |
| Завершить задачу            | `git mv task-tracker/2_in_progress/<файл> task-tracker/3_done/`   |
| Проверить текущую ветку     | `git branch`                                                      |
| Посмотреть статус изменений | `git status`                                                      |
| Посмотреть историю коммитов | `git log --oneline --graph --all`                                 |



## 6. Работа с несколькими задачами

### 6.1 Параллельная работа

Если нужно работать над несколькими задачами одновременно:

```bash
# Создай первую ветку задачи
git checkout main
git checkout -b task/2025-12-03_valkovets
# ... работаешь над задачей 1 ...
git push origin task/2025-12-03_valkovets

# Вернись в main для создания второй ветки
git checkout main
git pull origin main
git checkout -b task/2025-12-05_valkovets
# ... работаешь над задачей 2 ...
git push origin task/2025-12-05_valkovets
```

### 6.2 Переключение между задачами

```bash
# Переключение на задачу 1
git checkout task/2025-12-03_valkovets

# Работа...
git add ...
git commit -m "..."

# Переключение на задачу 2
git checkout task/2025-12-05_valkovets

# Работа...
git add ...
git commit -m "..."
```

### 6.3 Завершение задачи не по порядку

Если задача 2 завершилась раньше задачи 1:

```bash
# Завершаем задачу 2
git checkout task/2025-12-05_valkovets
git mv task-tracker/2_in_progress/2025-12-05_Valkovets.md task-tracker/3_done/
git commit -m "chore(tasks): завершить задачу"
git push origin task/2025-12-05_valkovets

# Сливаем задачу 2 в main
git checkout main
git pull origin main
git merge --no-ff task/2025-12-05_valkovets
git push origin main

# Возвращаемся к задаче 1
git checkout task/2025-12-03_valkovets

# Если нужны изменения из main — подтягиваем их
git merge main

# Продолжаем работу над задачей 1...
```



## 7. Связанные документы

- [Структура репозитория](./repository_structure.md) — где что размещается в проекте
- [Правила именования](./naming_conventions.md) — соглашения об именовании файлов и веток
- [Руководство по таск-трекеру](../../task-tracker/README.md) — как работать с задачами
- [Формат документа](../formatting/document_structure.md) — структура документов проекта
